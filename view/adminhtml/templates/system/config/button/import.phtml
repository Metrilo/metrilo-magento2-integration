<?php
/**
 * @var $block \Metrilo\Analytics\Block\System\Config\Button\Import
 */
?>
<?php if ($block->buttonEnabled()): ?>
    <?php
        $storeId = $block->getStoreId();
    ?>
    <div class="pp-buttons-container">
        <button id="<?php echo $block->getHtmlId() ?>" onclick="return false;">
            <span><?php echo __('Import'); ?></span>
        </button>
    </div>
    <script>
    require([
        'jquery',
        'metriloImport'
    ], function($, metrilo) {
        $("#<?php echo $block->getHtmlId() ?>").import({
            storeId: <?php echo $storeId; ?>,
            customersChunks: <?php echo $block->getCustomerChunks(); ?>,
            categoriesChunks: <?php echo $block->getCategoryChunks(); ?>,
            productsChunks: <?php echo $block->getProductChunks(); ?>,
            ordersChunks: <?php echo $block->getOrderChunks(); ?>,
            submitUrl: '<?php echo $block->getAjaxUrl(); ?>',
            messageSelector: '#metrilo_import_status'
        });
    });
    </script>
    <div id="metrilo_import_status"></div>
    <?php return; ?>
<?php endif; ?>

